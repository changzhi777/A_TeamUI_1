# 代码审查清单

本文档提供了代码审查的标准清单，用于确保代码质量、安全性和可维护性。

## 审查流程

### PR 创建前（开发者自查）

- [ ] 本地测试通过
- [ ] 代码格式化完成
- [ ] 无 TypeScript 错误
- [ ] 无 ESLint 警告
- [ ] 新代码包含版权头
- [ ] PR 描述清晰完整

### PR 审查时（审查者检查）

- [ ] 代码符合项目规范
- [ ] 功能实现正确
- [ ] 无明显性能问题
- [ ] 无安全漏洞
- [ ] 测试覆盖充分

## 审查清单

### 1. 代码规范

#### 命名规范
- [ ] 变量名、函数名语义清晰
- [ ] 遵循项目的命名约定
- [ ] 避免使用缩写或单字母变量（循环变量除外）
- [ ] 布尔值使用 `is`、`has`、`can` 等前缀

#### 代码风格
- [ ] 遵循项目的 ESLint 规则
- [ ] 代码格式化正确（Prettier）
- [ ] 导入语句正确排序
- [ ] 无未使用的导入和变量

#### 代码简洁性
- [ ] 无重复代码（DRY 原则）
- [ ] 函数单一职责（SRP 原则）
- [ ] 无过度复杂的逻辑（KISS 原则）
- [ ] 无未使用的代码和注释

### 2. 版权信息

- [ ] 新文件包含版权头
- [ ] 版权信息正确完整：
  ```typescript
  /**
   * @author 外星动物（常智）IoTchange
   * @email 14455975@qq.com
   * @copyright ©2026 IoTchange
   * @version V0.1.0
   */
  ```
- [ ] 版本号为当前版本

### 3. 类型安全

- [ ] 无 `any` 类型（特殊情况除外）
- [ ] 类型定义完整准确
- [ ] 使用类型导入（`import type`）
- [ ] 泛型使用正确

### 4. React 最佳实践

- [ ] 组件职责单一
- [ ] 正确使用 Hooks
- [ ] 无不必要的状态
- [ ] 正确处理副作用
- [ ] 正确使用 `useCallback` 和 `useMemo`
- [ ] 组件可测试

### 5. 性能考虑

- [ ] 无不必要的重渲染
- [ ] 列表使用正确的 key
- [ ] 图片正确加载和优化
- [ ] 无内存泄漏风险
- [ ] 大数据处理考虑分页/虚拟化

### 6. 安全检查

- [ ] 无敏感信息硬编码
- [ ] 用户输入正确验证和清理
- [ ] API 调用正确处理错误
- [ ] 权限检查完整
- [ ] 无 XSS/CSRF 风险

### 7. 错误处理

- [ ] 正确处理异步错误
- [ ] 用户友好的错误消息
- [ ] 错误边界正确设置
- [ ] 日志记录适当

### 8. 测试覆盖

- [ ] 新功能有单元测试
- [ ] Bug 修复有回归测试
- [ ] 边界情况有测试
- [ ] 测试覆盖率满足要求

### 9. 可访问性

- [ ] 语义化 HTML
- [ ] ARIA 属性正确
- [ ] 键盘导航可用
- [ ] 颜色对比度足够

### 10. 国际化

- [ ] 使用 i18n 而非硬编码文本
- [ ] 新增翻译 key 正确添加
- [ ] 日期/数字格式化考虑本地化

## 审查反馈指南

### 好的反馈

```markdown
# 建议
考虑将这个函数提取到单独的工具文件中，以便复用。

# 问题
这里可能会导致空指针异常，建议添加空值检查。

# 问题 (必须修复)
这里存在安全漏洞，用户输入未经验证直接使用。
```

### 反馈类型

| 标签 | 含义 | 是否阻塞 |
|------|------|----------|
| 建议 | 可选的改进建议 | 否 |
| 问题 | 需要讨论的问题 | 视情况 |
| 问题 (必须修复) | 必须修复的问题 | 是 |
| 赞赏 | 好的实现 | 否 |

## 常见问题

### 性能问题

- 不必要的 `useEffect` 依赖
- 大数组/对象的深拷贝
- 频繁的状态更新

### 类型问题

- 类型断言滥用
- 可选链使用不当
- 类型收窄不完整

### 安全问题

- `dangerouslySetInnerHTML` 使用
- 用户输入直接渲染
- 敏感数据暴露

## 版权信息

```
@author 外星动物（常智）IoTchange
@email 14455975@qq.com
@copyright ©2026 IoTchange
```
