# enhance-team-members 提案

## 概述

完善"团队成员"功能模块，使其与"项目管理"功能在交互体验和功能完整性上保持一致，支持完整的 CRUD 操作、搜索、筛选、排序和权限控制。

## Why

当前团队成员功能缺少关键的用户交互功能（搜索、排序、筛选），没有权限验证机制，使用原生 confirm() 对话框，且缺少操作反馈。这导致用户体验不一致，与项目管理功能的交互模式存在明显差距。

## 背景与动机

当前团队成员页面存在以下问题：

1. **缺少搜索功能** - 成员多时难以查找
2. **缺少排序功能** - 无法按姓名、角色、加入时间排序
3. **缺少筛选功能** - 无法按角色筛选成员
4. **缺少权限验证** - 没有检查用户是否有权限添加/删除成员
5. **简单的确认对话框** - 使用原生 `confirm()` 而非统一的 UI 组件
6. **缺少操作反馈** - 没有 toast 通知显示操作结果
7. **UI 不一致** - 与项目列表页面的交互模式不匹配
8. **缺少批量操作** - 无法批量更改角色或删除成员
9. **编辑功能受限** - 只能更改角色，无法编辑成员姓名和邮箱
10. **缺少成员统计** - 没有显示成员总数、各角色分布等信息

## 变更范围

### 新增功能

1. **成员搜索** - 在成员列表顶部添加搜索框，支持按姓名、邮箱搜索
2. **排序功能** - 添加排序下拉菜单，支持按姓名、加入时间排序
3. **角色筛选** - 添加角色筛选按钮组
4. **权限检查** - 使用 `canManageMembers` 检查操作权限
5. **Toast 通知** - 使用 sonner 显示操作结果
6. **确认对话框** - 使用统一的 `ConfirmDialog` 组件
7. **成员统计** - 显示成员总数和各角色分布
8. **编辑成员信息** - 支持编辑成员姓名、邮箱和角色
9. **批量操作** - 支持批量更改角色
10. **成员卡片视图** - 添加卡片视图模式（可选）

### 完善功能

1. **表单验证** - 添加邮箱格式验证
2. **国际化支持** - 完整的国际化文本
3. **响应式设计** - 移动端适配
4. **空状态优化** - 更友好的空状态提示

## 影响分析

### 用户体验影响
- ✅ 提升成员查找效率（搜索功能）
- ✅ 提供更好的成员组织方式（排序、筛选）
- ✅ 统一的操作体验（与项目列表一致）
- ✅ 明确的权限控制（权限不足时提示）
- ✅ 即时的操作反馈（Toast 通知）

### 技术影响
- 需要修改 `team-members.tsx`，重构搜索、筛选、排序逻辑
- 需要添加权限检查集成
- 需要修改 `AddMemberDialog` 组件，添加表单验证
- 需要创建 `EditMemberDialog` 组件
- 需要创建 `MemberSearchBar` 组件
- 需要创建 `MemberSortSelect` 组件
- 需要创建 `MemberRoleFilter` 组件
- 需要在 `zh-CN.ts` 中添加相关翻译

## 依赖关系

- 依赖现有的 `auth-store.ts` 权限系统
- 依赖现有的 `project-store.ts` 成员管理功能
- 依赖 `sonner` Toast 库（已安装）
- 无外部依赖，可在当前迭代完成

## 验收标准

1. 用户可以搜索成员（按姓名、邮箱）
2. 用户可以按姓名、加入时间排序成员
3. 用户可以按角色筛选成员
4. 用户添加/删除/编辑成员时会进行权限检查
5. 所有操作都有 Toast 通知反馈
6. 删除成员使用确认对话框
7. 可以编辑成员的姓名、邮箱和角色
8. 空状态显示友好的引导提示
9. 移动端布局正常工作
10. 所有文本都有国际化支持
