# fix-navigation-routes 任务列表

## 1. 项目上下文状态管理

- [x] 1.1 在 `project-store.ts` 中添加 `currentProjectId` 状态
- [x] 1.2 添加 `setCurrentProject(id)` 方法
- [x] 1.3 添加 `clearCurrentProject()` 方法
- [x] 1.4 配置 `persist` middleware 持久化 `currentProjectId`

## 2. 侧边栏导航配置更新

- [x] 2.1 修改 `sidebar-data.ts`，为需要项目上下文的导航项添加 `requiresProject: true` 标记
- [x] 2.2 更新"团队成员"导航项配置
- [x] 2.3 更新"分镜头创作"导航项配置
- [x] 2.4 更新"剧本编辑"导航项配置

## 3. Sidebar 组件导航逻辑

- [x] 3.1 读取 `Sidebar` 组件代码
- [x] 3.2 添加导航点击处理函数
- [x] 3.3 实现项目上下文检查逻辑
- [x] 3.4 实现有项目时的路由跳转
- [x] 3.5 实现无项目时的提示对话框

## 4. 项目详情页集成

- [x] 4.1 修改项目详情页，在加载时设置 `currentProjectId`
- [x] 4.2 修改项目列表页，在点击项目卡片时设置 `currentProjectId`
- [x] 4.3 确保项目切换时正确更新上下文

## 5. 国际化支持

- [x] 5.1 在 `zh-CN.ts` 中添加导航相关的翻译键
- [x] 5.2 添加"请先选择一个项目"提示翻译
- [x] 5.3 添加"前往项目列表"按钮翻译
- [x] 5.4 添加"创建新项目"按钮翻译

## 6. 测试验证

- [x] 6.1 测试有项目上下文时点击"团队成员"导航到正确路由
- [x] 6.2 测试有项目上下文时点击"分镜头创作"导航到正确路由
- [x] 6.3 测试有项目上下文时点击"剧本编辑"导航到正确路由
- [x] 6.4 测试无项目上下文时显示引导提示
- [x] 6.5 测试点击"前往项目列表"跳转到项目列表页
- [x] 6.6 测试点击"创建新项目"打开创建对话框
- [x] 6.7 测试项目切换后导航跳转到正确的项目
- [x] 6.8 测试移动端显示效果
