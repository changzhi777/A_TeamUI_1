# 分镜头清单模版导出导入向导

## 概述

为分镜头清单页面添加模版导出和导入功能，采用向导式工作流，支持空白模版和数据模版的导出，以及灵活的数据导入处理。

## 背景

当前分镜头清单页面仅支持简单的 CSV 导出功能。用户需要：
1. 导出标准空白模版用于线下填写和团队协作
2. 导出当前项目数据作为模版供其他项目复用
3. 通过向导式流程灵活控制导出/导入选项

## 目标

1. 创建向导式导出流程，支持多步选择和预览
2. 支持空白模版和数据模版两种导出模式
3. 支持 CSV、JSON、Word 三种格式导出
4. 创建向导式导入流程，支持文件解析、数据预览、字段映射
5. 支持覆盖/追加/选择性合并三种导入模式

## 实施范围

### 新增文件

- `src/features/storyboard/components/template-export-dialog.tsx` - 导出向导对话框
- `src/features/storyboard/components/template-import-dialog.tsx` - 导入向导对话框
- `src/lib/export/template.ts` - 模版导出逻辑

### 修改文件

- `src/features/storyboard/components/storyboard-list-page.tsx` - 添加导出/导入模版按钮
- `src/i18n/zh-CN.ts` - 添加向导相关翻译

### 复用组件

- `src/components/ui/steps.tsx` - 步骤指示器组件（如不存在则新建）
- `src/components/ui/progress.tsx` - 进度条组件（Shadcn UI）
- 现有导出功能 (`src/lib/export/*`)

## 技术方案

### 导出向导流程（5步）

```
步骤1: 选择模版类型
├── 空白模版 - 标准空白分镜头结构
└── 数据模版 - 基于当前项目数据

步骤2: 选择导出格式
├── CSV - 适合 Excel 编辑
├── JSON - 完整数据结构
└── Word - 适合打印

步骤3: 选择包含列（可多选）
├── 镜头编号
├── 场次
├── 景别
├── 运镜方式
├── 时长
├── 画面描述
├── 对白/旁白
└── 音效说明

步骤4: 预览和设置
├── 数据预览（数据模版）
├── 包含配图选项
└── 文件命名

步骤5: 确认导出
```

### 导入向导流程（5步）

```
步骤1: 选择文件
├── 拖拽上传区域
└── 文件格式验证

步骤2: 文件解析和预览
├── 显示解析的数据行数
├── 数据表格预览（前10行）
└── 检测到的列映射

步骤3: 选择目标项目
├── 现有项目列表
└── 或创建新项目选项

步骤4: 选择导入模式
├── 覆盖模式 - 清空现有数据后导入
├── 追加模式 - 追加到现有数据后
└── 选择性合并 - 手动选择要导入的列

步骤5: 确认导入
├── 导入摘要预览
└── 执行导入
```

### 数据格式规范

**CSV 格式（空白模版）:**
```csv
镜头编号,场次,景别,运镜方式,时长(秒),画面描述,对白/旁白,音效说明
1,1-1,全景,固定,5,示例画面描述,示例对白,示例音效
```

**JSON 格式（数据模版）:**
```json
{
  "type": "storyboard-template",
  "version": "1.0",
  "templateName": "示例模版",
  "exportDate": "2026-02-11",
  "shots": [...]
}
```

## 成功标准

- [ ] 导出向导对话框支持5步流程
- [ ] 支持空白模版和数据模版两种模式
- [ ] 支持 CSV、JSON、Word 三种格式
- [ ] 支持自定义列选择
- [ ] 导入向导对话框支持5步流程
- [ ] 支持文件拖拽上传
- [ ] 支持数据预览和列映射验证
- [ ] 支持覆盖/追加/选择性合并三种模式
- [ ] 导入前显示数据摘要和影响范围
- [ ] 提供导入回滚功能（失败时）

## 风险评估

- **中等风险**：文件解析需要处理各种格式变体
- **兼容性**：需要验证不同编辑器生成的 CSV 格式
- **数据安全**：导入操作需要备份现有数据

## 优先级

中等 - 增强用户体验，提高协作效率
