# 修复分镜头导入向导

## 概述

修复分镜头导入向导中的关键问题并优化用户体验：
1. 简化文件上传步骤中的格式说明
2. 修复 JSON 文件导入时在步骤6出现的 500 错误
3. 添加多项 UX 优化改进

## 问题分析

### 问题 1：格式说明过于冗长

**现状**：步骤 1（文件上传）中显示两个详细的格式说明卡片，包含多行列表项，占用大量空间。

**影响**：用户需要滚动才能看到主要操作区域，降低了界面的简洁性。

### 问题 2：JSON 导入 500 错误

**现状**：使用 JSON 格式文件导入分镜头时，在步骤 6（导入结果）出现 500 错误。

**根本原因分析**：
1. **`addShot` 方法覆盖传入的 `shotNumber`**：`storyboard-store.ts:84-102` 中，`addShot` 方法自动计算并覆盖了导入时指定的镜头编号，导致数据不一致。
2. **类型断言风险**：`template.ts:337-338` 使用 `as any` 绕过类型检查，可能导致运行时错误。
3. **缺少 JSON 文件大小限制**：大文件可能导致解析失败。

### 问题 3：UX 体验不足

- 缺少文件大小验证
- 拖放区域反馈不够明显
- 错误信息不够友好
- 缺少导入进度反馈

## 变更范围

### 核心修复
1. 简化格式说明为单行提示
2. 修复 JSON 导入时的镜头编号覆盖问题
3. 添加文件大小限制和验证

### UX 优化
1. 改进拖放视觉反馈
2. 增强错误提示信息
3. 添加导入进度指示
4. 优化移动端显示

## 相关规范

- `openspec/specs/storyboard/spec.md` - 分镜头编辑和导入导出相关需求

## 实施计划

详见 `tasks.md`。
