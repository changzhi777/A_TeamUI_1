# Proposal: add-asset-management

## 概述

为短剧创作平台添加"资产管理"功能，集中管理创作过程中生成的各种数字素材，包括图片、音频、视频、AI 生成内容和剧本文件等。

## 背景

当前系统中，分镜头创作涉及图片素材（imageUrl、imageThumbnailUrl），但这些素材都存储在分镜头记录中，缺乏统一的管理。随着创作流程的复杂化，需要：

1. 支持多种素材类型（图片、音频、视频、剧本、AI 生成内容）
2. 提供统一的资产浏览和管理界面
3. 支持素材在多个项目中复用（全局资产库）
4. 支持项目专属素材管理
5. 集成多种素材来源（本地上传、外部素材库、AI 生成、对象存储、外部链接）

## 目标

1. **创建统一的资产管理模块**：支持多种素材类型的 CRUD 操作
2. **实现混合资产归属模式**：支持全局资产库和项目专属资产
3. **集成多种素材来源**：本地上传、外部素材库、AI 生成、对象存储、外部链接
4. **提供资产浏览和搜索功能**：按类型、标签、项目等维度筛选
5. **与现有功能集成**：在分镜头创作中可以直接选择已有素材

## 影响范围

### 新增功能
- 资产管理规范 (`specs/asset-management/spec.md`)
- 资产管理页面和组件 (`features/assets/`)
- 资产管理状态 (`stores/asset-store.ts`)
- 资产管理 API (`lib/api/assets.ts`)
- 资产类型定义 (`lib/types/assets.ts`)

### 修改内容
- 侧边栏导航：添加"资产管理"入口
- 分镜头表单：集成资产选择器
- 导航规范：添加资产管理路由

### 非功能需求
- 支持大文件上传（>100MB）
- 支持断点续传
- 支持缩略图生成
- 支持文件预览
- 权限控制（admin 可管理所有资产，member 只能管理自己上传的资产）

## 风险与依赖

### 风险
- 大文件上传可能影响性能
- 对象存储集成需要后端支持
- 外部素材库可能涉及版权问题

### 依赖
- 后端需要提供资产管理 API（上传、删除、查询、更新）
- 后端需要集成对象存储服务（如 OSS、S3）
- 后端需要提供缩略图生成服务

## 替代方案

### 方案 A：最小化实现（推荐）
仅支持图片素材和本地上传，其他功能后续迭代。

### 方案 B：完整实现
一次性实现所有功能类型和素材来源。

**决策**：采用方案 A，优先实现核心功能，后续根据用户反馈迭代。

## 成功标准

1. 用户可以上传图片、音频、视频文件
2. 用户可以查看全局资产库和项目资产
3. 用户可以在分镜头创作中选择已有资产
4. 管理员可以管理所有用户上传的资产
5. 系统支持按类型、标签、项目筛选资产
